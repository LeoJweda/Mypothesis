= render :layout => 'shared/panel', :locals => {:title => 'Edit ' + resource_name.to_s.humanize} do
  = form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f|
    = devise_error_messages!
    
    %div
      = f.label :name
      %br/
      = f.text_field :name, :class => "text ui-widget-content ui-corner-all"
      
    %div
      = f.label :email
      %br/
      = f.email_field :email, :class => "text ui-widget-content ui-corner-all"
      
    %div
      = f.label :password
      %i (leave blank if you don't want to change it)
      %br/
      = f.password_field :password, :class => "text ui-widget-content ui-corner-all"
      
    %div
      = f.label :password_confirmation
      %br/
      = f.password_field :password_confirmation, :class => "text ui-widget-content ui-corner-all"
      
    %div
      = f.label :current_password
      %i (we need your current password to confirm your changes)
      %br/
      = f.password_field :current_password, :class => "text ui-widget-content ui-corner-all"
      
    %div
      = f.label :role
      %br/
      = f.collection_select :role, User::ROLES, :to_s, :humanize
      
    %div= f.submit "Update"
    
    %div
      = gravatar_for @user
      %a{:href => "http://gravatar.com/emails"} change
    
  %h3 Cancel my account
  
  %p
    Unhappy? #{link_to "Cancel my account", registration_path(resource_name), :confirm => "Are you sure?", :method => :delete}.
    
  = link_to "Back", :back